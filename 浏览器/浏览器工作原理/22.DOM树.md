### 22 | DOM树：JavaScript是如何影响DOM树构建的？

### 什么是DOM树
从网络传给渲染引擎的HTML文件字节流是无法直接被渲染引擎理解的，所以要将其转化为渲染引擎能够理解的内部结构，这个结构就是DOM。DOM提供了对HTML文档结构化的表述。在渲染引擎中，DOM有三个层面的作用。
* 从页面视角来看，DOM是生成页面的基础数据结构。
* 从JavaScript脚本视角来看，DOM提供了JavaScript脚本操作的接口，通过这套接口，JavaScript可以对DOM结构进行访问，从而改变文档的结构、样式和内容。
* 从安全视角来看，DOM是一道安全防护线，一些不安全的内容在DOM解析就被拒之门外了。
> 简言之，DOM是表述HTML的内部数据结构，它会将Web页面和JavaScript脚本连接起来，并过滤一些不安全的内容。

### DOM树如何生成
在渲染器引擎内部，有一个HTML解析器（HTMLParParser）的模块，负责将HTML字节流转换为DOM结构

1. 网络进程加载了多少数据，HTML解析器便会解析多少数据
2. 网络进程接收到响应头后，根据请求头中的content-type字段来判断文件的类型，比如content-type的值是‘text/html’,那么浏览器会判断这是一个HTML类型的文件，然后为该请求选择或者创建一个渲染进程。渲染进程创建好后，网络进程和渲染进程之间会创建一个共享数据的管道。